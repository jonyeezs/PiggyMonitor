<section class="mainbar budget">
    <div side-bar items="vm.allItems" ng-if="vm.isBudgetUpdated()"></div>
    <section class="matter">
        <div class="container">
            <div class="row option-row">
                <div class="col-md-12 btn-group pull-left" uib-dropdown>
                    <button id="single-button" type="button" class="btn btn-primary" uib-dropdown-toggle>
                        {{!vm.selectedYear ? vm.yearSelectionMsg : vm.selectedYear}}<span class="caret year-caret"></span>
                    </button>
                    <ul class="dropdown-menu year-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                        <li ng-show="vm.selectedYear != vm.yearSelectionMsg" class="header">
                            {{vm.yearSelectionMsg}}
                        </li>
                        <li ng-show="vm.selectedYear != vm.yearSelectionMsg" class="divider">
                        </li>
                        <li role="menuitem" ng-repeat="year in vm.availableYears"><a ng-click="vm.selectYear(year)">{{year}}</a></li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <uib-accordion close-others="false">
                    <uib-accordion-group is-open="vm.incomeTable.status.open">
                        <uib-accordion-heading>
                            <i class="glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> Income
                        </uib-accordion-heading>
                        <article-table items="vm.incomeTable.items" year="vm.selectedYear"></article-table>
                    </uib-accordion-group>
                    <uib-accordion-group is-open="vm.expenseTable.status.open">
                        <uib-accordion-heading>
                            <i class="glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> Expenses
                        </uib-accordion-heading>
                        <article-table items="vm.expenseTable.items" year="vm.selectedYear"></article-table>
                    </uib-accordion-group>
                </uib-accordion>
            </div>
        </div>
    </section>
    <div summary-panel year="vm.selectedYear" ng-if="vm.isBudgetUpdated()"></div>
</section>
